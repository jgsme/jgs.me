# 周年日記 UI 実装計画

## 概要

Scrapbox 上の「周年日記」（`0101`〜`1231`のようなタイトルのページ）を一覧・閲覧しやすくするための専用ページ（`/diary`）を実装する。

## UI/UX デザイン案

### カレンダービュー

- 1 月〜12 月の各月をカレンダー形式（グリッド）で表示する。
- **レイアウト**:
  - **PC**: 1 行に 3〜4 ヶ月分を表示し、全体を見渡しやすくする。
  - **SP**: 1 列で縦に並べ、スクロールで閲覧できるようにする。
- **日付セル**:
  - **記事あり**: 日付をリンク（例: `/pages/0401`）とし、アクセントカラー（青や緑など）で強調表示する。
  - **記事なし**: 薄いグレーなどで表示し、非活性（または作成ページへのリンク）とする。今回は閲覧メインのため非活性を想定。

## 実装詳細

### 1. ディレクトリ構成

`packages/web/pages/diary/` を新規作成する。
Vike のファイルベースルーティングにより、`/diary` でアクセス可能となる。

### 2. データ取得 (`+data.ts`)

- Cloudflare D1 の `pages` テーブルからデータを取得する。
- **ロジック**:
  - `pages` テーブルから `title` カラムを取得。
  - タイトルが 4 桁の数字（`MMDD`形式）であるページをフィルタリングする。
  - フィルタリング結果を `Set` または配列としてフロントエンドに渡す。
  - _Note_: SQLite の `REGEXP` が D1 環境でデフォルトで使えない可能性があるため、当面は全件取得後に JavaScript 側で正規表現フィルタリングを行う（データ量的に許容範囲と想定）。

### 3. フロントエンド実装 (`+Page.tsx`)

- **カレンダー生成ロジック**:
  - 各月の日数（2 月は 29 日とする）を持つ定数を定義。
  - ループ処理で各月・各日のグリッドを生成する。
- **スタイリング**:
  - Tailwind CSS を使用。
  - `grid`, `grid-cols-7` (週間表示) などを活用してカレンダーを組む。
  - `gap` を適切に設定し、視認性を確保する。

### 4. MMDD ページの構造化表示（詳細ビュー改善）

- **現状**: `[YYYY]` や記事リンクがフラットなリストとして表示されている。
- **改善**: `MMDD` 形式のタイトルのページでは、専用のパースロジックを適用する。
- **パースロジック**:
  - Scrapbox 記法をパースし、`[YYYY]` （年号リンク）をヘッダーとして認識する。
  - そのインデントブロック内にあるリンクを、その年の記事としてグルーピングする。
- **UI**:
  - 年ごとのセクションに分け、タイムライン風またはカード形式で記事を表示する。
  - 記事タイトルだけでなく、もし取得可能ならサムネイルやスニペットも表示できるとベスト（まずはリンクのみで可）。

## 今後の拡張（Out of Scope）

- 「今日は何の日」：アクセスした当日の日付をハイライト、またはトップに表示する機能。
- 各日付のホバー時に記事のプレビューやタイトルを表示する機能。
